<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <ul th:fragment="todo-list">
      <li th:each="todo : ${todos}" th:id="'todo-' + ${todo.id}">
        <span th:text="${todo.description}"></span>
        <span th:text="${todo.id}"></span>
        <button
          th:hx-post="@{/todos/update/{id}(id=${todo.id})}"
          th:id="'btn-completed' + ${todo.id}"
          th:fragment="'btn-completed' + ${todo.id}"
          hx-swap-oob="true"
          name="completed"
          th:value="${todo.completed ? false : true}"
          th:text="${todo.completed ? 'completed' : 'mark as done'}"
        ></button>
        <!-- <form th:action="@{/todos/update/{id}(id=${todo.id})}" method="post"> -->
        <button
          th:hx-post="@{/todos/update/{id}(id=${todo.id})}"
          th:id="'btn-starred' + ${todo.id}"
          th:fragment="'btn-starred' + ${todo.id}"
          hx-swap-oob="true"
          name="starred"
          th:value="${todo.starred ? false : true}"
          th:text="${todo.starred ? '★' : '☆' }"
        ></button>
        <button
          th:hx-delete="@{/todos/delete/{id}(id=${todo.id})}"
          hx-target="closest li"
          hx-swap="outerHTML swap:1s"
          hx-trigger="click"
          th:fragment="'btn-delete' + ${todo.id}"
          th:text="Delete"
        ></button>
      </li>
    </ul>
  </body>
</html>
